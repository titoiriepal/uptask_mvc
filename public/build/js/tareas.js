!function(){function e(e,t,a){const n=document.querySelector(".alerta");n&&n.remove();const r=document.createElement("DIV");r.classList.add("alerta",t),r.textContent=e,a.insertBefore(r,a.nextElementSibiling),setTimeout((()=>{r.remove()}),5e3)}function t(){const e=document.querySelector(".modal");document.querySelector(".formulario").classList.add("cerrar"),setTimeout((()=>{e.remove()}),1e3)}document.querySelector("#agregar-tarea").addEventListener("click",(function(){const a=document.createElement("DIV");a.classList.add("modal"),a.innerHTML='\n    <form class="formulario nueva-tarea">\n    <legend>Añade una nueva tarea</legend>\n    <div class="campo">\n        <label for="tarea">Tarea</label>\n        <input \n            type="text"\n            name="tarea"\n            placeholder="Añadir tarea al proyecto actual"\n            id="tarea"\n        />\n    </div>\n    <div class="opciones">\n        <input type="submit" class="submit-nueva-tarea" value="Añadir tarea"/>\n        <button type="button" class="cerrar-modal">Cancelar</button>\n    </div>\n    </form>\n    ',setTimeout((()=>{document.querySelector(".formulario").classList.add("animar")}),0),a.addEventListener("click",(function(a){a.preventDefault(),a.target.classList.contains("cerrar-modal")&&t(),a.target.classList.contains("submit-nueva-tarea")&&function(){const a=document.querySelector("#tarea").value.trim();if(""===a)return void e("El nombre de la tarea es obligatorio","error",document.querySelector(".formulario legend"));if(a.length>60)return void e("La tarea no puede superar los 60 caracteres","error",document.querySelector(".formulario legend"));!async function(a){const n=new FormData;n.append("nombre",a),n.append("url",function(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).url}());try{const a=`${location.origin}/api/tarea`,r=await fetch(a,{method:"POST",body:n}),o=await r.json();console.log(o),e(o.mensaje,o.tipo,document.querySelector(".formulario legend")),"exito"===o.tipo&&setTimeout((()=>{t()}),2e3)}catch(e){console.log(e)}}(a)}()})),document.querySelector(".dashboard").appendChild(a)}))}();